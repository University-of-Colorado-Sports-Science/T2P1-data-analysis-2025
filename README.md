---
title: "README"
author: "Sydney Stanton and Carter Zborowski"
date: "2025-07-08"
output: html_document
---

# Project Contributors

* Carter Zborowski: Cleaned the incident report dataset and risk status dataset, created visualizations for them, and created two actionable insights.
* Sydney Stanton: Cleaned up all datasets together and created exploratory analysis plots together. Made two actionable insights to be worked off of.

## Further Breakdown

* Carter Zborowski: Contributed 2 sources to the literature review. Found the impact of HSI on the future performance of an athlete in terms of catapult variables in a small limited study in “Limited Return to Preinjury Performance in NCAA Division I American Football Players With Hamstring Injuries” by William M Hannay, Joseph M Sliepka, Kate Parker, Kyle Sammons, Albert O Gee, Christopher Y Kweon, Mia S Hagen. Cleaned incident report dataset and risk status dataset by collapsing information for specific players into one row for each player and joining them for validation purposes. Also, joined all other datasets by creating a variable that grouped observations based on their date within players' injury time frames, and summarized variables within these groups for each player. Found the incidence rate of HSI in high-risk athletes versus non-high-risk athletes and the population to show how high-risk status predicts HSI incidence for question one. Also found statistical significance values for differences between average measures between players deemed high risk versus non-high risk athletes all the time to answer question two. 
* Sydney Stanton: Contributed multiple sources to the background research and literature review. 
Cleaned other datasets by shrinking them by removing unnecessary variables and cleaning up all datasets to only the past year of data. Taking the sum and average of viable variables, and created a function that tried the mode of categorical variables to be able to collapse categorical variables like numerical ones within one player id. Found HSI and high-risk rates overall, as well as by each individual position. Took multiple approaches to validation with stepwise validation, along with simple logistic regression models created to evaluate with confusion matrices, ROC curves, and proportion tables. Also created risk flags to establish better thresholds for multiple metrics for each position individually. With a CSV output of high-risk athletes by new thresholds.

# Project Overview

Question 1: Does simply being deemed as high risk on the soft tissue watch list predict HSI incidence? There were 33 unique players deemed high risk on the watchlist, many deemed high risk more than once, and out of these, 7 players experienced HSI following the test (0.2121212 proportion of HSI). We found that players deemed as high risk on the watchlist had a statistically significantly higher incidence of HSI in comparison to players not deemed as high risk on the watchlist. This was determined through the use of a one-tailed Fisher’s exact test on a contingency table describing the occurrence of HSI within those deemed high risk and those not.  The p-value generated was 0.007498, which is significant at most significance levels. However, there was not statistically significant difference in the incidence of HSI in those deemed high-risk versus the population as a whole. This was determined through the use of another one-tailed Fisher’s exact test on a contingency table describing the occurrence of HSI within those deemed high risk versus the occurrence of HSI in the entire population. The p-value generated from this test was 0.2039, which is not significant. These tests were implemented in our code through the use of the `t.test()` function with the alternative hypothesis argument set to ‘greater’, since we are testing for the true average proportion of athletes deemed high risk to be higher than that of the other athletes. It is also demonstrated on a slightly different dataset that as high risk is deemed statistically significant, so is risk status as a whole, even more so as both a simple logistic regression model with high-risk status binary predicting HSI and risk status as a whole predicting HSI both had significant p-values from the McNemar's test of 1.98e-13. But have different AUC values given from the ROC curves, where the AUC of just high risk as a predictor is 0.6849, and the AUC of the risk status as a predictor is 0.7503.

Question 2: If so, how do the components of the watch list predict subsequent HSI injury risk? The components of the watchlist’s ability to predict subsequent HSI injury risk depends on the football position group. For example, the average Nordic mean imbalance for athletes deemed high risk all time is statistically significantly different from the average Nordic mean imbalance for athletes not deemed high risk all time in only running backs, wide receivers, defensive backs, and linebackers. All four of these position groups have, on average, greater Nordic mean imbalances in athletes that were deemed high risk than other athletes, and using one-tailed Welch two-sample t-tests, their p-values are 0.0007819, 3.6e-10, 0.000365, and 0.0003189, respectively.  The average percent difference from norm, on the other hand, within high-risk athletes was statistically significantly different from non-high-risk athletes in every position group other than quarterbacks and running backs. However, tight ends were an outlier with an average percent difference from norm greater in high-risk athletes as compared to non-high-risk athletes. The p-values of a one-tailed Welch two-sample t-test for these position groups are as follows: wide receivers 0.001789, tight ends (opposite alternative hypothesis) 0.003184, offensive linemen 0.002712, defensive backs 0.0025, linebackers 0.0007234, defensive linemen 0.0001241. For the strength trend, we converted this categorical variable into a numerical variable where zero represents neutral, 1 represents up, and -1 represents down. Analyzing the difference in mean trend as a numerical variable grouped by high risk status, only quarterbacks, defensive backs, and defensive linemen had a statistically significantly lower average trend for those deemed high risk versus other athletes. The p-values for these one-tailed Welch two-sample t-tests were 0.01255, 0.03504, and 0.0001335, respectively. The `t.test()` function was also used for these differences of mean analyses and histograms created with `ggplot2` to display the distribution of the components of the watchlist filled by high-risk status. Finally, this is supported by the study done by Chris Wing and Chris Bishop that describes the significance of differences in strength between legs as well as general eccentric strength in HSI incidence which relates heavily to the subsequent injury risk of a player (Wing, Bishop, 2020).  	

Question 3: If the components of the watch list are predictive of HSI, can we establish better thresholds as being flagged?
To better establish thresholds as being flagged for HSI, current risk status will be compared to actual HSI events with new thresholds. Going through every position separately as HSI impact varies strongly from position to position to create different thresholds for each different position. The metrics used in this process are the variables found most valuable from the last question. Percent difference flag, positional norm flag, eccentric power flag, Nordic z score flag, force z score flag, force z score (maximum force), trend flag, recurrence of injury flag, general mechanism flag, and Nordic imbalance flag (with side taken into account). Outputs are then given as a quantile range for high risk in different positions as follows. Note some positions the flagging system was not valid for. For the defensive back position, the ranges for each different variable of the newly created risk score are as follows. The Nordic z-score high-risk quantiles are 10%: -0.9648691, 25%: -0.9648691, 50%: -0.9648691, 75%: 0.6999274. The force z-score high-risk quantiles are  10%:   -2.1428622, 25%:  -2.1428622, 50%:-0.2261216, 75%:-0.2261216. The recurrence of injury flag high-risk quantiles range is zero. The mechanism of injury flag high-risk quantiles range encompasses all contact hit injuries. The Nordic imbalance flags that the high-risk quantile range is zero. For the linebacker position, the ranges for each different variable of the newly created risk score are as follows. The Nordic z-score high-risk quantiles are 10%: -1.2009896, 25%: -1.2009896, 50%: -1.0927852, 75%: -0.2883293. With a sensitivity of 1 and a specificity of 0.2187029. The force z-score high-risk quantiles are 10%: -1.16985892, 25%: -1.16985892, 50%: 0.04738878, 75%: 2.19116648. The recurrence of injury flag high-risk quantiles range is zero. The Nordic imbalance flags that the high-risk quantile range is zero. With a sensitivity of 0.2857143 and a specificity of 0.7862969. For the offensive lineman position, the ranges for each different variable of the newly created risk score is as follows. The Nordic z-score high-risk quantiles are 10%: -0.4626412, 25%: -0.4626412, 50%: -0.4626412, 75%: 1.8914867. With a sensitivity of 1 and a specificity of 0.231303. The force z-score high-risk quantiles are 10%: 0.126425, 25%: 0.126425, 50%: 1.192592, 75%: 1.192592. With a sensitivity of 1 and a specificity of 0.4764842. The recurrence of injury flag high-risk quantiles range is zero. The mechanism of injury flag high-risk quantiles range is all one. The Nordic imbalance flag high-risk quantiles range is zero. With a sensitivity of 0.2 and a specificity of 0.8188915. For the wide receiver position, the ranges for each different variable of the newly created risk score is as follows. The Nordic z-score high-risk quantiles are 10%: -0.0369532, 25%: -0.0369532, 50%: -0.0369532, 75%: 1.0727713. The force z-score high-risk quantiles are 10%: -1.0278196, 25%: -1.0278196, 50%: -1.0278196, 75%: -0.4387716. The recurrence of injury flag high-risk quantiles range is zero. The mechanism of injury flag high-risk quantiles range is all one. The Nordic imbalance flags high-risk quantile range is zero. For the running back position, the ranges for each different variable of the newly created risk score are as follows. The Nordic z-score high-risk quantiles are 10%: -0.8418460, 25%:-0.6993384, 50%: -0.5832178, 75%:0.9887346 . The force z-score high-risk quantiles are 10%: -0.8722764, 25%:  -0.6332709, 50%:0.1961876, 75%:  0.8317891.  With a sensitivity of 1 and a specificity of 0.6648794. The recurrence of injury flag high-risk quantiles range is zero. The mechanism of injury flag high-risk quantiles range is all one. The Nordic imbalance flags that the high-risk quantile range is zero. Lastly, for defensive linemen, quarterbacks, specialists, and tight ends we were not able to compute viable thresholds of the risk score for these positions. All of these new thresholds of z-scores and flags are combined together to create one new risk score. Each component contributes a 0 or 1. For a total risk score range of 0-1, however, our data ranges from 0-6. It can be noted that the athlete with the highest risk score was an offensive linemen with a risk score of six, who was marked as routine status, athlete ID_131. It appears that from the new risk score of around 4-6 indicates the most at high-risk athletes from our team, keeping in mind we do not have any players with a greater risk score than six. 43 unique athlete injury instances were in the flagged athletes CSV output with a risk score in the range of 4-6. Looking at a risk table, it emphasizes that a risk score of two has the highest HSI rate, but this is to keep in mind that the total number of athletes counted in that category is 2220, while the risk score six has only nine in count. So it can be noted that purely from a larger pool, the chances of at least a few more people getting injured would increase even if they have had lower risk indications, as no one ever plans to get injured. When creating a simple logistic regression model to predict HSI from the risk score, the risk score is seen as statistically significant with a p-value of 0.000173, displaying the predictive power of the risk score for HSI.

# Code Implementation

Overall, this notebook is designed to be run sequentially. If you start from the top down, execution should be straightforward, and the code should run as expected.
1. Data Cleaning 
We worked through eleven different datasets for our analytical work. As we had multiple large datasets with lots of information duplicated or not important to our analysis, we took a lot of time looking through all the data, and with our background research knowledge, it allowed us to remove some variables completely or combine information together to diminish our data frame size. We investigated all datasets, as a big part of this project is variable importance, thus making sure to continue on with only and all meaningful data. While choosing what variables to use, we also noted that many variables were averaged and summed to what was deemed appropriate, along with a mode function being created to average (most frequent) the categorical variables. We were able to connect back to some of our background research, where we learned about indicators that have an impact on HSI injury. We also only wanted to use data from the last year to include the newest and most relevant data while also allowing for a full cycle of on-season, off-season, and pre-season to occur. We also created an additional dataset to only incorporate the last 3 months to look at a shorter time frame to be able to look deeper into the data, as well as to see how it compares to the year of data. We merged all relevant data together on the anon_id variable, which is unique for every player. Then, binaries for high-risk binary variables from the status variable, along with an HSI incident binary from the OSICS14.Code section, which is indicated by (TMI, TMB, TMS). The final fully merged dataset (final_merge_full) included 1782 observations and 58 variables. The three-month emphasis dataset (full3) included 437 observations with variables narrowed down to 15. To remove all NA values, the dataset (filter_full3_merge) was reduced to 34 observations and remaining with 15 variables, to be noted. We have a separate document including all variables on it, labeled datasets information.
2. Exploratory Analysis 
Slight left-skewed bell curve distribution for athletes' Nordic maximum force. While the overall wellness scores have a high majority at 100%, which is 20/20, with a wide range of athletes at lower overall wellness scores, but many fewer of them. A density plot shows the frequency of each risk status category. Most of the players' status is typically routine, around 60%, followed by the high-risk status category, with about 20% of the players. Then followed by low and medium-risk status, with a slight and gradual decrease in frequency from the high-risk status frequency.  Another density plot shows the frequency of players in each of the positions. It is to be noted that the more players in a certain position, the more likely it is that more people will be hurt in that position. The four largest position groups are wide receiver, defensive linebacker, defensive back, and tight end. Then a scatterplot of position by risk status was created. Showing that wide receiver is the position with the most high-risk status players, followed by running back. While most routine players fall under the positions of defensive back, offensive linebacker, and defensive linebacker. Next, in the stacked bar chart of position by count with risk status as the fill color, we can see that even though wide receivers gave by far the most high-risk players, they also have the most low-risk players, as the position has such a high frequency of players compared to the other positions. Also important to see that in the next bar chart of injury recurrence by frequency, almost all injuries are new ones and not a recurring injury, making a new injury about 12x greater than a recurrence of any injury (1st, or 2nd, etc). Therefore, a past injury occurrence is possibly not as strong of a predictor as previously anticipated, as specifically for our team, recurring injuries are highly infrequent. New injuries are the biggest threat to our team. In a density bar chart of injured body parts, the thigh has the greatest frequency compared to any other injured body part. The thigh, which includes the hamstring, and therefore, HSI injury. The knee, which is a close second, is worth noting as both are lower body injuries that are very close in distance to one another. 
3. Background Statstics + More Exploratory Analysis 
Overall, the HSI Incidence rate is indicated in the incident dataset with only filtering for sport=football, incident=injury, and injury as a result of sport participation=yes. A total of 28/1703 observations reported an HSI injury, which is approximately 1.64%.  Overall, the high-risk rate is indicated in the risk_merge dataset, which contains all original observations; 41/215 observations were deemed high risk, about 19.07%. Of those observations, 33 were unique players deemed high risk, so about 15.35%. The rate of high risk and HSI incidence coinciding is on the merged dataset of incident and risk_merge (HSIincident_vs_risk2). 56 observations reported HSI and 611 observations were deemed high-risk. While only 34/2487 were high-risk and had an HSI at 1.37%. Therefore, there is a large gap between how many players are put into the high-risk status category and how many players actually suffer from an HSI injury. Next, look at the number of observations deemed high risk versus having an HSI injury by each position group. 173 times players who were wide receivers were deemed high risk, while none had an HSI injury. 73 times players who were tight ends were deemed high risk, while only 6 had an HSI injury. Of the specialists, none were deemed high risk, and no HSI injuries occurred. 121 times players who were RB were deemed high risk, while only 22 had an HSI injury. Four times, players who were quarterbacks were deemed high risk, while none had an HSI injury. 87 times players who were offensive linemen were deemed high risk, while only 22 had an HSI injury. Fifty-four times, players who were linebackers were deemed high risk, while only 6 had an HSI injury. 22 times players who were defensive linemen were deemed high risk, while none had an HSI injury. 77 times players who were defensive backs were deemed high risk, while none had an HSI injury. 
4. Validation of Soft Tissue Watchlist Risk Status 
First, a subset of the soft-tissue watchlist is created that only contains the observations where a player was deemed high risk, and the dates are collapsed into one column for each unique player ID. The same is done for the incident report, where one dataset is created with all lower body injuries, and another has only HSI, and the injury with date is collapsed into one column for each unique player. This is done in order to make joining these datasets easier, simply by the player ID. These datasets are then left-joined into the risk status dataset, and the collapsed columns are separated into more columns to allow for the individual dates to be analyzed. New columns are then created with time differences in days between the test date and injury dates as well as a categorical variable that describes whether each test was “successful” or not (if HSI occurred after the test or not). The next section isolates the test “success” columns and joins them, omitting the NAs to create a data frame that contains all high-risk tests and whether they were “successful” or not, with a barplot to visualize. Then, the time columns are isolated with the corresponding player IDs and joined together, getting rid of the negative time differences to just analyze test “successes” through a bar chart. 	This process is then recreated for the other levels of risk below for exploration purposes. Also, for a more general process, we used a dataset (HSIincident_vs_risk2) which only includes anon_id, Position, Status, Highrisk_binary, and HSI. It has 2487 observations with 8 variables. Looking at a simple logistic regression model, HSI is predicted by the high-risk status binary (model 2). Evaluating model 2 with classes at a 0.5 threshold, the confusion matrix shows a sensitivity of 1 and a specificity of 0, showing a balanced accuracy of 50%. McNemar's test p-value is 1.98e-13, which demonstrates that we would reject the null hypothesis, suggesting statistical significance, regardless of the results of the confusion matrix being highly skewed. The ROC curve displays and has an AUC of 0.6849. In comparison, the AUC of a logistic regression model with HSI predicted by risk status, overall, not just high-risk, is 0.7503. Both are in a range considered acceptable for relatively good performance. Then, calculating the proportions of P(HSI|High) and P(HSI|Not High), we are able to compute a chi-squared and Fisher test to confirm our results. With Pearson’s Chi-Squared test with Yates continuity correction, the X-squared is 38.421, df is 1, and the p-value is 5.702e-10. Then the Fisher Exact Test for Count Data has a p-value of 6.506e-09. Therefore, the p-value is less than alpha, which in our case is 0.05, and is statistically significant.
5. Additional meaningful metrics not already on the watchlist that may be predictive of HSI risk 
A recreation of the dashboard is created through the joining of the incident report, the risk status, and VALD datasets on anon ID and the group each observation is a part of for each athlete. Then the previous injuries are summarized and summed through the use of the `mutate()` function. Using this table and the above analysis of the different risk categories the “false negatives” are isolated, which include athletes that were deemed low or routine risk and suffered HSI. The prevalence of HSI within the total population, players not deemed high risk, and those deemed high risk are found by creating a list of the player IDs that fit into each category and then filtering the incident report using players in the lists to find the number of players in each group that experienced HSI and dividing by the length of each list. These values are then put into a matrix and the `t.test()` function is used, calling the matrices, to conduct a Fisher’s Exact Test. Below a simple dataframe is created from one of the matrices to create a bar graph of proportions of HSI within non high risk athletes vs high risk athletes. This helps visualize what the test above achieves. A new dataset is then defined, that is the VALD dataset with binary indicators for high risk status and HSI incidence and prevalence of HSI within each position group are summarized. From there datasets are created filtering for each position group and t-tests conducted for statistically significant differences of means in the variables within the watchlist between high risk athletes and non high risk athletes. Graphs are created below these t-tests displaying the distribution of each variable, filled by high risk status or not, for a specific position group. This process continues similarly into other variables of interest not in the watchlist such as bilateral force, catapult metrics, and wellness ratings later in the notebook. 
6. Thresholds for Predicting HSI
The dataset used for the final question only included relevant variables averaged for each player, except for the injury code, OSICS14.Code, and the recurrence of injury variable, allowing for a player with more than one injury to show up more than once and to be able to display the dates of injuries. Other variables included that were averaged were Position, Nordic.Left.Z.Score, Nordic.Right.Z.Score, Maximum.Force, Nordic.MEAN.Imbalance.Side, Overall.Wellness.score, Recurrence.of.Injury, General.mechanism,Status, and grouped by anon_id, which is what all of the data from the original datasets were merged together on. Also, adding the binary of an HSI incident using the OSICS14.Code, along with a High-risk_binary created for players in the high-risk category. Numerical groups were made for all categorical variables, such as recurrence of injury, where 0-no injury, 1-new injury/illness, and  2-first recurrence. The general mechanism also evolved into a binary classification for 1-contact hit and 0-not an injury due to a contact hit. Additionally, scaling was performed on the Nordic mean imbalance side so that the Nordic imbalance z-score can utilize the flagging of z-scores < -1.28 or z-scores> 1.28 to encompass 80% of the distribution.  A joint Nordic z-score is also made from the left and right average z-scores combined. Then, for multiple variables, including recurrence of injury, mechanism of injury, and Nordic imbalance, flags were made to go up if these metrics were to pass a certain threshold or were in a certain category. These flags, when combined, help to define whether the predefined risk conditions based on multiple metrics match the original risk status or are better at determining an HSI incident. Then, looping through every different position to create thresholds for each metric stated above. For each metric and for each position, giving an output of markers at the 10% 25%, 50%, 75% for the high-risk status group and for the HSI group. Along with an ROC output analysis, when applicable. Lastly, outputting a multimetric matrix by creating a risk score ranging from zero to six in our data that counts how many of the thresholds the players breached. Exporting a CSV file of players and their information that triggered flags in the risk score and also a CSV of the risk scores, HSI count, and HSI rate. Also, creating a logistic regression model of HSI predicted by the newly made risk score.

# Final Results Summary

Players deemed high risk on the watchlist had a statistically significant difference in HSI incidence rate as compared to those not deemed high risk. The ability of the components of the soft-tissue watchlist to predict subsequent risk status also strongly depends on the position group. The components of the watchlist are predictive of HSI, but being able to add more components along with varying for each position will greatly increase predictive power. Adding to positional norm difference, average imbalance, previous injury, and trend, with components such as eccentric power, a maximum average force z-score, nordic power z-score, mechanism of injury, and recurrence of injury all contribute to predictability power of HSI through what was found answering question three in the created risk score factor.
